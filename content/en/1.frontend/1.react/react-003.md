---
title: Day 3 ç‹€æ…‹èˆ‡å‰¯ä½œç”¨
description: å­¸ç¿’ React æ¡†æ¶
icon: 'lucide:air-vent'
gitTalk: false
date: 2023-05-06 19:00:20
read: '5'
authors:
  - name: Aaron Shih
    username: eepson123tw
    avatar: https://www.github.com/eepson123tw.png
    to: https://github.com/eepson123tw
    target: _blank
---
> å­¸ç¿’ React æ¡†æ¶ - 003 çµ„ä»¶ç‹€æ…‹èˆ‡å‰¯ä½œç”¨æ›´æ–°

## ç‹€æ…‹çš„æŠ½è±¡

åœ¨å¯¦éš›çš„é–‹ç™¼å ´æ™¯ä¸­,å‰ç«¯æœƒæ¥æ”¶åˆ°å¾ˆå¤šçš„è³‡æ–™,ä¸è«–æ˜¯é é¢åˆå§‹çš„é è¨­è³‡æ–™,é‚„æ˜¯ç”±å¾Œç«¯å‚³éè€Œä¾†çš„ api è³‡æ–™,éœ€è¦ä¸€å€‹èƒ½ä¿å­˜çš„æ–¹æ³•,
è€Œç‹€æ…‹æ˜¯ä¸€å€‹ React å¯¦ä½œå‡ºä¾†çš„å‡½ç¤º.

æ ¹æ“š React çš„åŸºæœ¬æ¦‚å¿µç†è«–ä¸€æ–‡ä¸­æè¿°,UI è¢« State (ç‹€æ…‹)æ‰€å½±éŸ¿è®Šæ›´å‡ºä¸åŒçš„æ¨£æ…‹,æ›´å¸Œæœ›æ¯å€‹ UI èƒ½ä¿å­˜è‡ªæœ‰çš„ç‹€æ…‹,ä¸¦é€éæˆ‘å€‘è¨­è¨ˆå¥½çš„å‡½å¼,**å–®å‘çš„æ›´æ–°ç‹€æ…‹**.
::code-group

```javascript [å¼•ç”¨è‡ªåŸºæœ¬æ¦‚å¿µ]
/* å°‡ç‹€æ…‹çš„ç®¡ç†çµåˆ UI çš„é‚è¼¯æŠ½è±¡,å°±åƒæ˜¯çµ„ä»¶ä¸€æ¨£,æˆ‘å€‘å®šç¾©propsé€²ä¾†çš„åƒæ•¸,
  ä¸¦ä¾ç…§å‰¯ä½œç”¨å‡½ç¤ºæ›´æ–°,å‚³éä¸‹ä¾†çš„ç‹€æ…‹.
  å¯ä»¥ç™¼ç¾,æŠ½è±¡çš„çµ„ä»¶ä¸­ä¸¦æ²’æœ‰å…¶é¤˜è§¸ç™¼å‰¯ä½œç”¨çš„å‡½å¼,
  ä¹Ÿæ˜¯ç‚ºäº†ä¿æŒè³‡æ–™ç‹€æ…‹çš„ä¸å¯è®Šæ€§,è³‡æ–™åªèƒ½ä¾ç…§æˆ‘å€‘çš„è¨­è¨ˆ,å–®å‘çš„è®Šæ›´.
*/
function FancyNameBox(user, likes, onClick) {
  return FancyBox([
    'Name: ',
    NameBox(`${user.firstName} ${user.lastName}`),
    'Likes: ',
    LikeBox(likes),
    LikeButton(onClick),
  ]);
}

// Implementation Details(è¨­ç½®ç‹€æ…‹çš„åˆå§‹å€¼,åŠä½¿ç‹€æ…‹æ›´æ–°çš„å‰¯ä½œç”¨å‡½å¼)

let likes = 0;
function addOneMoreLike() {
  likes++;
  rerender(); // éå¸¸é‡è¦ ç•¶ç‹€æ…‹æ›´æ–°æ™‚ï¼Œæˆ‘å€‘éœ€è¦è§¸ç™¼é é¢çš„æ›´æ–°
}

// Init è³‡æ–™ç‹€æ…‹åˆå§‹åŒ–

FancyNameBox(
  { firstName: 'Sebastian', lastName: 'MarkbÃ¥ge' },
  likes,
  addOneMoreLike
);
```

::

## useState

çµ„ä»¶åœ¨ React ä¸­åªæ˜¯ä¸€å€‹å‡½å¼çš„å°è£,ç•¶å‡½å¼è¢«åŸ·è¡Œ,è¨˜æ†¶é«”ä¸­çš„æŒ‡å‘å°±æœƒè¢«æ’å‡º,æˆ‘å€‘å¸Œæœ›ç‹€æ…‹èƒ½ä¾ç…§é é¢é‚è¼¯çš„ä½¿ç”¨,ä¿å­˜åœ¨æˆ‘å€‘çš„çµ„ä»¶ä¸­,React å¯¦ä½œäº†ä¸€å€‹èƒ½è®“ç‹€æ…‹æŒçºŒå­˜åœ¨çš„ hookï¼ˆå¯ä»¥è¦–ç‚ºå®˜æ–¹æä¾›çš„å·¥å…·å‡½å¼ï¼‰useState.

[ç¯„ä¾‹](https://codepen.io/eepson123tw/pen/NWOyNYP?editors=1010)

::alert{type="warning" icon="lucide:eraser"}
å¾ç¯„ä¾‹ä¸­æˆ‘å€‘å¯ä»¥è§€å¯Ÿæˆ‘å€‘åœ¨çµ„ä»¶ä¸­èª¿ç”¨ useState,ä¸¦è¨­ç½®åˆå§‹å€¼,ä¾ç…§æˆ‘å€‘å®šç¾©çš„æ–¹å¼æ›´æ”¹ state,ä¸¦ä¸” state è®Šæ›´å¾Œ,é é¢ rerender å¾Œç™¼ç¾ç‹€æ…‹å·²è¢«æ›´æ–°.
::

## useState å…§éƒ¨çš„ä½œç”¨

ç°¡å–®ä¾†èªª useState å¹«æˆ‘å€‘åšåˆ°äº†å…©ä»¶äº‹,

1. è®“åŸå…ˆæœƒåœ¨ rerender å¾Œä¸èƒ½ä¿å­˜çš„ç‹€æ…‹å€¼,ç¹¼çºŒå­˜åœ¨.
2. ç‹€æ…‹æ›´æ–°å¾Œå†æ¬¡è§¸ç™¼äº† rerender.

::alert{type="warning" icon="lucide:eraser"}
useState æ˜¯ä¸€å€‹å°è£å¾Œçš„é–‰åŒ…ç©ºé–“,å°±æ˜¯ç‹€æ…‹æŠ½è±¡çš„å¯¦ä½œ.
::

```javascript
// ç°¡æ˜“çš„æŠ½è±¡
function useState(state) {
  const setState = (action) => {
    action(state);
    React.root.reRender(<App />); // rerender
  };
  return [state, setState];
}
```

ç•¶æ¯æ¬¡èª¿ç”¨ useState æ™‚,æˆ‘å€‘éƒ½æœƒå¾å‡½å¼æ”¶åˆ° state,åŠè§¸ç™¼çš„å‰¯ä½œç”¨å‡½å¼,å†ä¾†å°±æ˜¯æ›´æ–°é é¢.
æ­¤æŠ½è±¡åªæ˜¯éå¸¸ç°¡å–®çš„ä¸€å€‹æè¿°,å¯¦éš›çš„å¯¦ä½œæ›´çˆ²è¤‡é›œ,åˆå§‹å€¼çš„è§€æ¸¬,æ­é…ç¯€é»çš„åˆ‡ç‰‡ç­‰ç­‰...**çœŸçš„æ˜¯éå¸¸æœ‰è¶£ ğŸ˜‡ğŸ˜‡**

## ç‹€æ…‹ç®¡ç† Array Object

::alert{type="danger" icon="lucide:ambulance"}
React ç‹€æ…‹ç®¡ç†ä¸­,å¿…é ˆå°‡ä»»ä½•å‹åˆ¥çš„è³‡æ–™è¦–ç‚ºä¸å¯è®Šçš„,ä¸æ‡‰ç›´æ¥æ”¹è®Šåœ¨ React ç‹€æ…‹ä¸‹çš„å°è±¡ã€‚ç›¸åï¼Œç•¶ä½ æƒ³æ›´æ–°ä¸€å€‹å°è±¡(or é™£åˆ—)æ™‚ï¼Œéœ€è¦**å‰µå»ºä¸€å€‹æ–°å°è±¡ï¼ˆæˆ–è¤‡åˆ¶ä¸€å€‹ç¾æœ‰å°è±¡**ï¼‰ï¼Œç„¶å¾Œè¨­ç½®ç‹€æ…‹ä½¿ç”¨è©² copy.
::

å°‡ç‰©ä»¶è³‡æ–™äº¤ç”± state ç®¡ç†æ™‚æˆ‘å€‘å¯ä»¥ä½¿ç”¨è§£æ§‹çš„æ–¹å¼å»æ›´å‹• state ç‹€æ…‹,[ç¯„ä¾‹](https://codepen.io/eepson123tw/pen/NWOyNYP?editors=1011)

è€Œé™£åˆ—è³‡æ–™çš„ç‹€æ…‹ç®¡ç†,å°±å¦‚ç‰©ä»¶ä¸€èˆ¬,æˆ‘å€‘ä¸æ‡‰å»ç›´æ¥æ”¹è®Šé™£åˆ—ä¸­çš„å€¼,è€Œæ˜¯éœ€è¦å‰µå»ºæˆ–æ˜¯å›å‚³æ–°å°è±¡.

```javascript
setAry(
  // Replace the state
  [
    // with a new array
    ...ary,
    { id: nextId++, name },
  ]
);
```

å¦å¤–å†è®Šæ›´è¤‡é›œçš„ç‰©ä»¶å‹æ…‹æ™‚,å¿…é ˆç•™æ„æ˜¯å¦è®Šæ›´**è¨˜æ†¶é«”çš„å…±åŒæŒ‡å‘**,ä¸ç„¶å®¹æ˜“å‡ºç¾éé æœŸçš„éŒ¯èª¤æ­.

## é‡ç½®ç‹€æ…‹ with key

Key æ˜¯ä¸€å€‹è¾¨æ˜ç¯€é»çš„å±¬æ€§,å¸¸å¸¸ä½¿ç”¨åœ¨æ¸²æŸ“åˆ—è¡¨æ™‚,å¯ä»¥è®“ react è¾¨è­˜ç¯€é»çš„ç¨ç‰¹æ€§.
ä½†åœ¨ç®¡ç†ç‹€æ…‹æ™‚ä¹Ÿå¯ä»¥é€é Key ä¾†å¯¦ç¾é‡ç½®ç‹€æ…‹.ä¸»è¦æ˜¯åˆ©ç”¨ key å€¼æ”¹è®Šå‰‡é‡æ–°æ¸²æŸ“çš„ç‰¹æ€§.

[ç¯„ä¾‹](https://codepen.io/eepson123tw/pen/NWOyNYP?editors=0011)

## åƒè€ƒè³‡æ–™

è‹¥æƒ³äº†è§£ç‚ºä½•ç‹€æ…‹æ˜¯ä¸å¯è®Šçš„,[å¯ä»¥å‰å¾€](https://react.dev/learn/updating-objects-in-state#why-is-mutating-state-not-recommended-in-react)

- [å¯è¦–åŒ–çš„ç†è§£ React](https://react.gg/visualized#history-of-the-web)
- [React å®˜æ–¹æ–‡ä»¶](https://react.dev/)
- [React Basic](https://github.com/reactjs/react-basic)
- [Build your own React](https://pomb.us/build-your-own-react/)
